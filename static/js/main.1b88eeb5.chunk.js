(this.webpackJsonprominesweeper=this.webpackJsonprominesweeper||[]).push([[0],{61:function(e,t,a){e.exports=a(75)},66:function(e,t,a){},67:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),s=a.n(i),o=(a(66),a(67),a(13)),c=a(14),l=a(16),u=a(15),m="initial",E="flag",p="question",g="empty-",M="mine",h="redmine",d=function(e,t){var a;switch(e.status){case C.COVERED_CLEAR:a=m;break;case C.COVERED_FLAG:a=E;break;case C.COVERED_QUESTION:a=p;break;case C.UNCOVERED:a=e.type===f.MINE?t?h:M:g+e.nearMines;break;default:console.error("No se pudo determinar la imagen"),console.error(e,t),a=m}return a},C={COVERED_CLEAR:"CC",COVERED_FLAG:"CF",COVERED_QUESTION:"CQ",UNCOVERED:"UC"},f={EMPTY:"E",MINE:"M"},v=function(e,t,a){var n=[],r=0,i=e*t,s=a/i;console.log("Creating Game - mine probability: ".concat(s," - total cells: ").concat(i));for(var o=0;o<e;o++){for(var c=[],l=0;l<t;l++){var u=f.EMPTY;if(r<a)(i-(o*t+l+1)<=r||Math.random()<s)&&(u=f.MINE);var E={type:u,nearMines:0};u===f.MINE?(r++,l>0&&c[l-1].type!==f.MINE&&c[l-1].nearMines++,o>0&&(l>0&&n[o-1][l-1].type!==f.MINE&&n[o-1][l-1].nearMines++,n[o-1][l].type!==f.MINE&&n[o-1][l].nearMines++,l<t-1&&n[o-1][l+1].type!==f.MINE&&n[o-1][l+1].nearMines++)):(l>0&&c[l-1].type===f.MINE&&E.nearMines++,o>0&&(l>0&&n[o-1][l-1].type===f.MINE&&E.nearMines++,n[o-1][l].type===f.MINE&&E.nearMines++,l<t-1&&n[o-1][l+1].type===f.MINE&&E.nearMines++)),E.status=C.COVERED_CLEAR,E.image=m,c.push(E)}n.push(c)}return n},O=a(53),y=a(110),b=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isUncovered:!1},e.handleLeftClick=function(){e.props.notifyClick(!1)},e.handleRightClick=function(t){t.preventDefault(),e.props.notifyClick(!0)},e}return Object(c.a)(a,[{key:"render",value:function(){return this.props.status!==C.UNCOVERED?r.a.createElement("div",{onClick:this.handleLeftClick,onContextMenu:this.handleRightClick},r.a.createElement("img",{className:"cell",src:"".concat("/rominesweeper","/img/box-").concat(this.props.image,".png"),alt:""})):r.a.createElement("div",null,r.a.createElement("img",{className:"cell",src:"".concat("/rominesweeper","/img/box-").concat(this.props.image,".png"),alt:""}))}}]),a}(n.Component),N=a(103),R=a(112),V=a(107),k=a(108),D=a(48),G=a.n(D);function I(e){return r.a.createElement(G.a,null,r.a.createElement(N.a,e))}var w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(R.a,{open:!0,PaperComponent:I},r.a.createElement(V.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement("img",{src:this.props.isVictory?"".concat("/rominesweeper","/img/roman-victory.jpg"):"".concat("/rominesweeper","/img/roman-defeat.jpg"),alt:""}),r.a.createElement(y.a,{id:"btn-restart",className:"btn-end-dialog",variant:"contained",color:"primary",onClick:this.props.restartGame},"Reiniciar con la misma configuraci\xf3n"),r.a.createElement(y.a,{id:"btn-backtomenu",className:"btn-end-dialog",variant:"contained",color:"primary",onClick:this.props.backToMenu},"Volver al men\xfa"),r.a.createElement(k.a,{variant:"caption",className:"footnote"},"(pod\xe9s mover esta ventana si te tapa)")))}}]),a}(n.Component),U=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={isGameOver:!1,isVictory:!1},e.renderGameGrid=function(){for(var t=[],a=function(a){for(var n=[],i=function(t){n.push(r.a.createElement(b,{key:"cell-".concat(a,"-").concat(t,"-game-").concat(e.props.gameId),image:e.props.gameMatrix[a][t].image,status:e.props.gameMatrix[a][t].status,notifyClick:function(n){return e.onCellClick(a,t,n)}}))},s=0;s<e.props.gameMatrix[a].length;s++)i(s);t.push(r.a.createElement("div",{key:"row".concat(a,"_G").concat(e.props.gameId),className:"row"},n))},n=0;n<e.props.gameMatrix.length;n++)a(n);return t},e.backToMenu=function(){e.setState({isGameOver:!1}),e.props.backToMenu()},e.restartGame=function(){e.setState({isGameOver:!1}),e.props.restartGame()},e.renderGameOverModal=function(){if(e.state.isGameOver)return r.a.createElement(w,{isVictory:e.state.isVictory,restartGame:e.restartGame,backToMenu:e.backToMenu})},e.handleSaveGameClick=function(){e.props.saveGameAndReturnToMenu()},e}return Object(c.a)(a,[{key:"onCellClick",value:function(e,t,a){var n=this.props.gameMatrix[e][t];if(n.status!==C.COVERED_FLAG||a){var r=function(e,t){return e===C.UNCOVERED?C.UNCOVERED:t?e===C.COVERED_CLEAR?C.COVERED_FLAG:e===C.COVERED_FLAG?C.COVERED_QUESTION:e===C.COVERED_QUESTION?C.COVERED_CLEAR:void 0:C.UNCOVERED}(n.status,a),i=Object(O.a)(this.props.gameMatrix);i[e][t].status=r,i[e][t].image=d(i[e][t],!0),r===C.UNCOVERED&&n.type===f.EMPTY&&0===n.nearMines&&(i=function e(t,a,n){var r=t.length-1,i=t[0].length-1;return a>0&&n>0&&t[a-1][n-1].type===f.EMPTY&&t[a-1][n-1].status!==C.UNCOVERED&&(t[a-1][n-1].status=C.UNCOVERED,t[a-1][n-1].image=g+t[a-1][n-1].nearMines,0===t[a-1][n-1].nearMines&&(t=e(t,a-1,n-1))),a>0&&t[a-1][n].type===f.EMPTY&&t[a-1][n].status!==C.UNCOVERED&&(t[a-1][n].status=C.UNCOVERED,t[a-1][n].image=g+t[a-1][n].nearMines,0===t[a-1][n].nearMines&&(t=e(t,a-1,n))),a>0&&n<i&&t[a-1][n+1].type===f.EMPTY&&t[a-1][n+1].status!==C.UNCOVERED&&(t[a-1][n+1].status=C.UNCOVERED,t[a-1][n+1].image=g+t[a-1][n+1].nearMines,0===t[a-1][n+1].nearMines&&(t=e(t,a-1,n+1))),n>0&&t[a][n-1].type===f.EMPTY&&t[a][n-1].status!==C.UNCOVERED&&(t[a][n-1].status=C.UNCOVERED,t[a][n-1].image=g+t[a][n-1].nearMines,0===t[a][n-1].nearMines&&(t=e(t,a,n-1))),n<i&&t[a][n+1].type===f.EMPTY&&t[a][n+1].status!==C.UNCOVERED&&(t[a][n+1].status=C.UNCOVERED,t[a][n+1].image=g+t[a][n+1].nearMines,0===t[a][n+1].nearMines&&(t=e(t,a,n+1))),a<r&&n>0&&t[a+1][n-1].type===f.EMPTY&&t[a+1][n-1].status!==C.UNCOVERED&&(t[a+1][n-1].status=C.UNCOVERED,t[a+1][n-1].image=g+t[a+1][n-1].nearMines,0===t[a+1][n-1].nearMines&&(t=e(t,a+1,n-1))),a<r&&t[a+1][n].type===f.EMPTY&&t[a+1][n].status!==C.UNCOVERED&&(t[a+1][n].status=C.UNCOVERED,t[a+1][n].image=g+t[a+1][n].nearMines,0===t[a+1][n].nearMines&&(t=e(t,a+1,n))),a<r&&n<i&&t[a+1][n+1].type===f.EMPTY&&t[a+1][n+1].status!==C.UNCOVERED&&(t[a+1][n+1].status=C.UNCOVERED,t[a+1][n+1].image=g+t[a+1][n+1].nearMines,0===t[a+1][n+1].nearMines&&(t=e(t,a+1,n+1))),t}(i,e,t)),r===C.UNCOVERED&&n.type===f.MINE?(i=function(e){for(var t=0;t<e.length;t++)for(var a=0;a<e[0].length;a++)e[t][a].status!==C.UNCOVERED&&(e[t][a].status=C.UNCOVERED,e[t][a].image=d(e[t][a],!1));return e}(i),this.setState({gameMatrix:i,isGameOver:!0,isVictory:!1})):!function(e){for(var t=0;t<e.length;t++)for(var a=0;a<e[t].length;a++){var n=e[t][a];if(n.status!==C.UNCOVERED&&(n.status!==C.COVERED_FLAG||n.type!==f.MINE))return!1}return!0}(i)?this.setState({gameMatrix:i}):this.setState({isGameOver:!0,isVictory:!0})}}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderGameGrid(),this.renderGameOverModal(),r.a.createElement(y.a,{onClick:this.handleSaveGameClick,className:"btn-separated",variant:"contained",color:"primary"},"Guardar juego y volver al men\xfa"))}}]),a}(n.Component),S=a(109),j=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={gameId:0,rows:12,cols:10,totalMines:30,mineProbability:0,gameMatrix:[],gameOver:!1,showMenu:!0},e.calcMineProbability=function(e,t,a){var n=(e/(t*a)*100).toFixed(2);return n>100?100:n},e.startGame=function(){var t=v(parseInt(e.state.rows),parseInt(e.state.cols),parseInt(e.state.totalMines));e.setState({gameId:e.state.gameId+1,gameMatrix:t,showMenu:!1})},e.handleStartClick=function(){localStorage.setItem("savedGame",""),e.startGame()},e.handleColsChange=function(t){e.setState({cols:t.target.value,mineProbability:e.calcMineProbability(e.state.totalMines,e.state.rows,t.target.value)})},e.handleRowsChange=function(t){e.setState({rows:t.target.value,mineProbability:e.calcMineProbability(e.state.totalMines,t.target.value,e.state.cols)})},e.handleMinesChange=function(t){e.setState({totalMines:t.target.value,mineProbability:e.calcMineProbability(t.target.value,e.state.rows,e.state.cols)})},e.restartGame=function(){e.startGame()},e.showMenu=function(){e.setState({showMenu:!0})},e.handleContinueClick=function(){var t=JSON.parse(localStorage.getItem("savedGame"));console.log(t),e.setState({gameId:e.state.gameId+1,gameMatrix:t,showMenu:!1})},e.renderContinueButton=function(){if(localStorage.getItem("savedGame"))return r.a.createElement(y.a,{onClick:e.handleContinueClick,color:"primary",className:"btn-separated"},"Continuar juego guardado")},e.saveGameAndShowMenu=function(){localStorage.setItem("savedGame",JSON.stringify(e.state.gameMatrix)),e.showMenu()},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({mineProbability:this.calcMineProbability(this.state.totalMines,this.state.rows,this.state.cols)})}},{key:"render",value:function(){return this.state.showMenu?r.a.createElement(V.a,{container:!0,direction:"column",justify:"center",alignItems:"flex-start"},r.a.createElement(S.a,{className:"menu-input",id:"field-cols",label:"Columnas",variant:"outlined",type:"number",defaultValue:this.state.cols,onChange:this.handleColsChange}),r.a.createElement(S.a,{className:"menu-input",id:"field-rows",label:"Filas",variant:"outlined",type:"number",defaultValue:this.state.rows,onChange:this.handleRowsChange}),r.a.createElement(S.a,{className:"menu-input",id:"field-mines",label:"Cantidad de minas",variant:"outlined",type:"number",defaultValue:this.state.totalMines,onChange:this.handleMinesChange}),r.a.createElement(k.a,{variant:"overline"},"Probabilidad de mina: ",this.state.mineProbability,"%"),r.a.createElement(y.a,{onClick:this.handleStartClick,variant:"contained",color:"primary"},"Jugar"),this.renderContinueButton()):r.a.createElement(U,{key:"game".concat(this.state.gameId),gameId:this.state.gameId,gameMatrix:this.state.gameMatrix,restartGame:this.restartGame,backToMenu:this.showMenu,saveGameAndReturnToMenu:this.saveGameAndShowMenu})}}]),a}(n.Component),P=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(V.a,{container:!0},r.a.createElement(V.a,{item:!0,xs:12},r.a.createElement("img",{className:"logo",src:"".concat("/rominesweeper","/img/logo.jpg"),alt:""})))}}]),a}(n.Component);var T=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P,null),r.a.createElement(j,null))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.1b88eeb5.chunk.js.map